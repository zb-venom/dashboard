{"version":3,"sources":["webpack:///./src/components/Rooms.vue?eee0","webpack:///./src/views/Dialogs.vue","webpack:///./src/components/P2PDialog.vue","webpack:///./src/components/P2PDialog.vue?7812","webpack:///./src/components/Rooms.vue","webpack:///./src/components/Rooms.vue?377d","webpack:///./src/views/Dialogs.vue?343c","webpack:///./src/views/Dialogs.vue?9884"],"names":["class","activeDialog","name","data","p2pDialogs","methods","createP2PDialog","axios","post","user","_id","localStorage","offer","then","res","console","log","for","type","id","placeholder","rooms","createP2PRoom","p2pRooms","room","key","a","defaults","baseURL","headers","common","jwt","JSON","parse","peer","initiator","i","dataR","on","setTimeout","stringify","push","render","__scopeId","components","P2PDialog","Rooms"],"mappings":"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","file":"js/chunk-88f82ffa.c1dafd4c.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Rooms.vue?vue&type=style&index=0&id=16b021e7&lang=scss&scoped=true\"","<template>\r\n  <div class=\"container\">\r\n    <Rooms />\r\n    <div class=\"dialog\">\r\n      <div class=\"no-dialog\" v-if=\"activeDialog == null\">\r\n        Select dialog to start messaging\r\n      </div>\r\n      <P2PDialog />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.container {\r\n  display: flex;\r\n  margin-right: auto;\r\n  margin-left: auto;\r\n  align-items: stretch;\r\n  justify-content: space-between;\r\n\r\n  padding: 10px;\r\n\r\n  @media (min-width: 768px) {\r\n    width: 750px;\r\n  }\r\n  @media (min-width: 992px) {\r\n    width: 970px;\r\n  }\r\n  @media (min-width: 1200px) {\r\n    width: 1140px;\r\n  }\r\n\r\n  .dialog {\r\n    display: block;\r\n    position: relative;\r\n    flex-shrink: 0;\r\n    width: 200px;\r\n    flex-grow: 8;\r\n    background: white;\r\n    border-top: 1px solid lightgrey;\r\n    border-right: 1px solid lightgrey;\r\n    border-bottom: 1px solid lightgrey;\r\n    border-radius: 0 0.3rem 0.3rem 0;\r\n\r\n    .no-dialog {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      border-radius: 2rem;\r\n      padding: 5px 10px;\r\n      font-size: 0.8rem;\r\n      background: rgba(0, 0, 0, 0.15);\r\n      color: rgba(0, 0, 0, 0.5);\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport P2PDialog from \"../components/P2PDialog\";\r\nimport Rooms from \"../components/Rooms\";\r\n\r\nexport default {\r\n  name: \"Dialogs\",\r\n  data: function() {\r\n    return {};\r\n  },\r\n  components: {\r\n    P2PDialog,\r\n    Rooms,\r\n  },\r\n  methods: {},\r\n};\r\n</script>\r\n","<script>\r\nexport default {\r\n  name: \"P2PDialog\",\r\n  data: function() {\r\n    return {\r\n      p2pDialogs: [],\r\n    };\r\n  },\r\n  methods: {\r\n    createP2PDialog: function() {\r\n      axios\r\n        .post(\"/create\", {\r\n          user: {\r\n            _id: localStorage._id,\r\n          },\r\n          offer: \"offer\",\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import script from \"./P2PDialog.vue?vue&type=script&lang=js\"\nexport * from \"./P2PDialog.vue?vue&type=script&lang=js\"\n\nexport default script","<template>\r\n  <div class=\"rooms-menu\">\r\n    <div class=\"simple-rooms\">\r\n      <form class=\"search-input\">\r\n        <label for=\"search-room\" class=\"ico\">ðŸ”Ž</label>\r\n        <input type=\"search\" id=\"search-room\" placeholder=\"Search rooom\" />\r\n      </form>\r\n      <div class=\"active-rooms-list\" v-if=\"rooms\"></div>\r\n      <div class=\"no-active-rooms\" v-else>No active rooms</div>\r\n    </div>\r\n    <div class=\"p2p-rooms\">\r\n      <div class=\"p2p-header\">\r\n        <h3><b>P2P</b>ROOMS</h3>\r\n        <div class=\"createRoom\" v-on:click=\"createP2PRoom\"></div>\r\n      </div>\r\n      <div class=\"active-rooms-list\" v-if=\"p2pRooms\">\r\n        <div class=\"list-item\" v-for=\"room in p2pRooms\" v-bind:key=\"room\">\r\n          <div class=\"room-name\">{{ room }}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"no-active-rooms\" v-else>No active rooms</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"bg-layer\"></div>\r\n  <div class=\"model-create-p2p\">\r\n    <div class=\"model-relative\">\r\n      <div class=\"box-model\">\r\n        <div class=\"box-model-header\">Create <b>P2P</b>Room</div>\r\n        <div class=\"box-model-body\">\r\n          <div class=\"shared-link-box\">\r\n            <p>\r\n              Share the created link with your friends to set up a p2p\r\n              connection:\r\n            </p>\r\n            <div class=\"input-link\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"shared-link\"\r\n                value=\"https://clientdiplom.herokuapp.com/r/54tgh87h54784h8745\"\r\n                readonly\r\n              />\r\n              <span class=\"tooltip\">Click to copy</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.rooms-menu {\r\n  border: 1px solid lightgrey;\r\n  width: 250px;\r\n  flex-shrink: 0;\r\n  flex-grow: 1;\r\n  background: white;\r\n  border-radius: 0.3rem 0 0 0.3rem;\r\n\r\n  .simple-rooms {\r\n    border-bottom: 5px solid lightgrey;\r\n    overflow-y: auto;\r\n    height: 352px;\r\n    max-height: 352px;\r\n    border-radius: 0.3rem 0 0 0;\r\n\r\n    .search-input {\r\n      display: flex;\r\n      border-bottom: 1px solid lightgrey;\r\n      background: rgb(240, 240, 240);\r\n\r\n      .ico {\r\n        text-decoration: none;\r\n        padding: 15px;\r\n        cursor: pointer;\r\n      }\r\n\r\n      #search-room {\r\n        width: 100%;\r\n        outline: none;\r\n        border: none;\r\n        padding: 15px 5px;\r\n        background: rgb(250, 250, 250);\r\n      }\r\n    }\r\n  }\r\n\r\n  .p2p-rooms {\r\n    height: 352px;\r\n    .p2p-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 15px;\r\n      border-bottom: 1px solid lightgrey;\r\n      background: rgb(240, 240, 240);\r\n\r\n      h3 {\r\n        font-weight: 300;\r\n      }\r\n\r\n      .createRoom {\r\n        padding: 0;\r\n        border: none;\r\n        outline: none;\r\n        background: transparent;\r\n        position: relative;\r\n        width: 20px;\r\n        cursor: pointer;\r\n\r\n        &:before,\r\n        &:after {\r\n          display: block;\r\n          width: 20px;\r\n          height: 1px;\r\n          transition: background-color 0.3s linear, transform 0.3s linear;\r\n          background-color: rgb(37, 37, 37);\r\n          position: absolute;\r\n          content: \"\";\r\n        }\r\n\r\n        &:before {\r\n          top: 10px;\r\n          transform: rotate(90deg);\r\n        }\r\n        &:after {\r\n          top: 10px;\r\n        }\r\n\r\n        &:hover {\r\n          &:before,\r\n          &:after {\r\n            height: 2px;\r\n            background-color: black;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .no-active-rooms {\r\n    text-align: center;\r\n    color: lightgrey;\r\n    font-size: 0.8rem;\r\n    padding: 10px;\r\n  }\r\n\r\n  .active-rooms-list {\r\n    height: 300px;\r\n  }\r\n}\r\n\r\n.bg-layer {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 500;\r\n  overflow: hidden;\r\n  display: none;\r\n  background: rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.model-create-p2p {\r\n  position: fixed;\r\n  display: none;\r\n  width: 100%;\r\n  height: 100%;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 900;\r\n\r\n  .model-relative {\r\n    padding: 20px;\r\n\r\n    .box-model {\r\n      background: white;\r\n      margin: 0 auto;\r\n      min-width: 250px;\r\n      max-width: 700px;\r\n      top: 0;\r\n      border: 1px solid lightgray;\r\n      border-radius: 0.5rem;\r\n\r\n      &-header {\r\n        text-align: center;\r\n        font-size: 2rem;\r\n        padding-top: 40px;\r\n        padding-bottom: 20px;\r\n      }\r\n\r\n      &-body {\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 20px;\r\n\r\n        .shared-link-box {\r\n          display: flex;\r\n          align-items: center;\r\n          flex-wrap: wrap;\r\n\r\n          p {\r\n            margin-bottom: 10px;\r\n          }\r\n\r\n          .input-link {\r\n            position: relative;\r\n            display: flex;\r\n            width: 100%;\r\n\r\n            .shared-link {\r\n              padding: 10px 20px;\r\n              width: 100%;\r\n              outline: none;\r\n              cursor: pointer;\r\n              border: 1px solid lightgrey;\r\n              border-radius: 0.5rem;\r\n\r\n              transition: all 300ms;\r\n\r\n              &:hover {\r\n                background: lightgrey;\r\n              }\r\n\r\n              &:active {\r\n                background: black;\r\n                color: white;\r\n              }\r\n            }\r\n\r\n            .tooltip {\r\n              display: none;\r\n              position: absolute;\r\n              bottom: 100%;\r\n              left: 50%;\r\n              padding: 10px;\r\n              margin-bottom: 10px;\r\n              transform: translate(-50%, 0);\r\n              border-radius: 6px;\r\n\r\n              color: white;\r\n              background: black;\r\n\r\n              &::after {\r\n                content: \"\";\r\n                position: absolute;\r\n                top: 100%;\r\n                left: 50%;\r\n                margin-left: -5px;\r\n                border-width: 5px;\r\n                border-style: solid;\r\n                border-color: black transparent transparent transparent;\r\n              }\r\n            }\r\n\r\n            &:hover {\r\n              .tooltip {\r\n                display: block;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Peer from \"simple-peer\";\r\nimport io from \"socket.io-client\";\r\n// const socket = io(\"https://authdiplom.herokuapp.com/\");\r\nconst socket = io(\"http://localhost:3000\");\r\naxios.defaults.baseURL = \"http://localhost:3000/api/\";\r\naxios.defaults.headers.common[\"Authorization\"] = localStorage.jwt;\r\n\r\nexport default {\r\n  name: \"Rooms\",\r\n  data: function() {\r\n    return {\r\n      rooms: null,\r\n      p2pRooms: !!localStorage.p2pRooms\r\n        ? JSON.parse(localStorage.p2pRooms)\r\n        : null,\r\n    };\r\n  },\r\n  methods: {\r\n    createP2PRoom: function() {\r\n      const peer = new Peer({ initiator: true });\r\n      let i = 0;\r\n      let dataR = [];\r\n      peer.on(\"signal\", (data) => {\r\n        dataR[i] = data;\r\n        i++;\r\n        if (i == 3)\r\n          setTimeout(() => {\r\n            if (i == 3)\r\n              axios\r\n                .post(\"/p2p/create\", {\r\n                  user: {\r\n                    _id: localStorage._id,\r\n                  },\r\n                  offer: JSON.stringify(dataR),\r\n                })\r\n                .then((res) => {\r\n                  let p2pRooms = !!localStorage.p2pRooms\r\n                    ? JSON.parse(localStorage.p2pRooms)\r\n                    : [];\r\n                  p2pRooms.push(res.data._id);\r\n                  this.p2pRooms = p2pRooms;\r\n                  localStorage.p2pRooms = p2pRooms;\r\n                });\r\n          }, 1000);\r\n        else if (i == 4)\r\n          axios\r\n            .post(\"/p2p/create\", {\r\n              user: {\r\n                _id: localStorage._id,\r\n              },\r\n              offer: JSON.stringify(dataR),\r\n            })\r\n            .then((res) => {\r\n              let p2pRooms = !!localStorage.p2pRooms\r\n                ? JSON.parse(localStorage.p2pRooms)\r\n                : [];\r\n              p2pRooms.push(res.data._id);\r\n              this.p2pRooms = p2pRooms;\r\n              localStorage.p2pRooms = JSON.stringify(p2pRooms);\r\n            });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Rooms.vue?vue&type=template&id=16b021e7&scoped=true\"\nimport script from \"./Rooms.vue?vue&type=script&lang=js\"\nexport * from \"./Rooms.vue?vue&type=script&lang=js\"\n\nimport \"./Rooms.vue?vue&type=style&index=0&id=16b021e7&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-16b021e7\"\n\nexport default script","import { render } from \"./Dialogs.vue?vue&type=template&id=365285a8\"\nimport script from \"./Dialogs.vue?vue&type=script&lang=js\"\nexport * from \"./Dialogs.vue?vue&type=script&lang=js\"\n\nimport \"./Dialogs.vue?vue&type=style&index=0&id=365285a8&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Dialogs.vue?vue&type=style&index=0&id=365285a8&lang=scss\""],"sourceRoot":""}